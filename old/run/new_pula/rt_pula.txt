enable
configure terminal
!
service config
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname RT1-Pl-777
!
security passwords min-length 10
!
no aaa new-model
memory-size iomem 5
!
dot11 syslog
ip source-route
ip cef
no ipv6 cef
!
! --- DHCP IPv4 EXCLUSIONS ---
ip dhcp excluded-address 172.20.9.1 172.20.9.5
ip dhcp excluded-address 172.20.10.129 172.20.10.133
ip dhcp excluded-address 172.20.11.1 172.20.11.5
ip dhcp excluded-address 172.20.11.65 172.20.11.69
!
! --- DHCP IPv4 POOLS ---
ip dhcp pool VLAN30-STAFF-PL
 network 172.20.10.128 255.255.255.128
 default-router 172.20.10.129
 dns-server 8.8.8.8
!
ip dhcp pool VLAN50-WIRELESS-PL
 network 172.20.9.0 255.255.255.0
 default-router 172.20.9.1
 dns-server 8.8.8.8
!
ip dhcp pool VLAN60-GUESTS-PL
 network 172.20.11.0 255.255.255.192
 default-router 172.20.11.1
 dns-server 8.8.8.8
!
ip dhcp pool VLAN40-VOIP-PL
 network 172.20.11.64 255.255.255.224
 default-router 172.20.11.65
 option 150 ip 172.20.11.65
!
ip dhcp pool VOIP-PULA
 default-router 172.20.11.65
 option 150 ip 172.20.11.65
!
! --- HOSTS / DOMAIN ---
no ip domain lookup
ip domain name isepacademy.ccna.itn.com
ip host rt1-zg 172.20.7.97
ip host srv-dhcp 172.20.7.36
ip host rt1-pl 172.20.11.105
ip host sw1-pl 172.20.11.106
ip host rt1-st 172.20.14.41
ip host sw1-st 172.20.14.42
!
login block-for 300 attempts 3 within 120
multilink bundle-name authenticated
voice-card 0
!
crypto pki token default removal timeout 0
license udi pid CISCO2851 sn FCZ122872KF
license accept end user agreement
!
vtp mode transparent
username cisco privilege 15 secret 5 classclass
!
redundancy
!
! --- VPN / IPSEC CONFIGS ---
crypto isakmp policy 100
 encr aes
 authentication pre-share
 group 5
!
crypto isakmp key z4gr3bPvl4 address 172.16.201.45
crypto isakmp key z4gr3bPvl4 address 172.16.201.54
crypto isakmp key Pvl4$pl1t address 172.16.201.67
!
crypto ipsec transform-set TSET esp-aes esp-sha-hmac
 mode tunnel
!
crypto map CROATIA 10 ipsec-isakmp
 set peer 172.16.201.54
 set transform-set TSET
 match address 101
!
crypto map CROATIA 20 ipsec-isakmp
 set peer 172.16.201.67
 set transform-set TSET
 match address 102
!
! --- INTERFACES LOOPBACK ---
interface Loopback0
 description ENGINEERING
 ip address 172.20.8.1 255.255.255.0
 ip nat inside
 ip virtual-reassembly in
!
interface Loopback1
 no ip address
 ip nat inside
 ip virtual-reassembly in
!
interface Loopback2
 description COMMUNICATION
 ip address 172.20.10.1 255.255.255.128
 ip nat inside
 ip virtual-reassembly in
!
! --- INTERFACES TUNNEL ---
interface Tunnel0
 description Tunnel PULA-ZAGREB
 ip address 10.0.0.2 255.255.255.252
 ip mtu 1400
 ip tcp adjust-mss 1360
 ip ospf 100 area 0
 tunnel source GigabitEthernet0/0
 tunnel destination 172.16.201.54
 no shutdown
!
interface Tunnel1
 description Tunnel PULA-SPLIT
 ip address 10.0.0.9 255.255.255.252
 ip mtu 1400
 ip tcp adjust-mss 1360
 ip ospf 100 area 0
 tunnel source GigabitEthernet0/0
 tunnel destination 172.16.201.67
 no shutdown
!
! --- INTERFACES GIGABIT WAN / LAN ---
interface GigabitEthernet0/0
 description WAN_INTERNET
 ip address dhcp
 ip nat outside
 ip virtual-reassembly in
 duplex auto
 speed auto
 crypto map CROATIA
 no shutdown
!
interface GigabitEthernet0/1
 no ip address
 duplex auto
 speed auto
 no shutdown
!
interface GigabitEthernet0/1.5
 description MGMT_APs
 encapsulation dot1Q 5
 ip address 172.20.11.97 255.255.255.248
 ip nat inside
 ip virtual-reassembly in
!
interface GigabitEthernet0/1.6
 description MGMT_SWITCH
 encapsulation dot1Q 6
 ip address 172.20.11.105 255.255.255.248
 ip nat inside
 ip virtual-reassembly in
!
interface GigabitEthernet0/1.7
 description NATIVE_VLAN
 encapsulation dot1Q 7 native
!
interface GigabitEthernet0/1.30
 description STAFF_VLAN
 encapsulation dot1Q 30
 ip address 172.20.10.129 255.255.255.128
 ip helper-address 172.20.7.36
 ip nat inside
 ip virtual-reassembly in
!
interface GigabitEthernet0/1.40
 description VOIP_VLAN
 encapsulation dot1Q 40
 ip address 172.20.11.65 255.255.255.224
 ip access-group VOIP-NO-INTERNET in
 ip helper-address 172.20.7.36
 ip nat inside
 ip virtual-reassembly in
!
interface GigabitEthernet0/1.50
 description WIRELESS_VLAN
 encapsulation dot1Q 50
 ip address 172.20.9.1 255.255.255.0
 ip helper-address 172.20.7.36
 ip nat inside
 ip virtual-reassembly in
!
interface GigabitEthernet0/1.60
 description GUESTS_VLAN
 encapsulation dot1Q 60
 ip address 172.20.11.1 255.255.255.192
 ip access-group GUEST-ONLY-INTERNET in
 ip helper-address 172.20.7.36
 ip nat inside
 ip virtual-reassembly in
!
! --- INTERFACES SERIAL ---
interface Serial0/0/0
 no ip address
 shutdown
 clock rate 2000000
!
interface Serial0/0/1
 no ip address
 shutdown
 clock rate 2000000
!
! --- ROUTING & NAT ---
router ospf 100
 router-id 4.4.4.4
 passive-interface default
 no passive-interface GigabitEthernet0/1
 no passive-interface Tunnel0
 no passive-interface Tunnel1
 network 10.0.0.0 0.0.0.3 area 0
 network 10.0.0.8 0.0.0.3 area 0
 network 172.20.8.0 0.0.0.255 area 0
 network 172.20.10.0 0.0.0.127 area 0
 network 172.20.10.0 0.0.0.127 area 0
 network 172.20.10.128 0.0.0.127 area 0
 network 172.20.9.0 0.0.0.255 area 0
 network 172.20.11.0 0.0.0.63 area 0
 network 172.20.11.64 0.0.0.31 area 0
 network 172.20.11.104 0.0.0.3 area 0
!
ip forward-protocol nd
no ip http server
no ip http secure-server
!
ip nat inside source list NAT-FINAL-PL interface GigabitEthernet0/0 overload
ip route 0.0.0.0 0.0.0.0 dhcp
!
! --- ACLs B√ÅSICAS ---
access-list 1 permit 172.20.0.0 0.0.255.255
access-list 101 permit gre host 172.16.201.65 host 172.16.201.54
access-list 102 permit gre host 172.16.201.65 host 172.16.201.67
!
ip access-list standard ACL-SNMP
 permit 172.20.7.35
 deny   any
!
ip access-list standard NAT-PERMIT
 permit 172.20.8.0 0.0.7.255
 permit 172.20.10.0 0.0.1.255
!
ip access-list standard SSH-ACCESS
 no permit 172.20.14.0 0.0.0.63
 permit 172.20.12.0 0.0.0.127
 exit
!
! --- ACLs EXTENDIDAS ---
ip access-list extended GUEST-ONLY-INTERNET
 deny   ip 172.20.11.0 0.0.0.63 172.20.0.0 0.0.255.255
 deny   ip 172.20.14.128 0.0.0.63 172.20.0.0 0.0.255.255
 permit ip 172.20.11.0 0.0.0.63 any
!
ip access-list extended NAT-FILTER
 deny   ip 172.20.0.0 0.0.255.255 172.20.0.0 0.0.255.255
 permit ip 172.20.0.0 0.0.255.255 any
!
ip access-list extended NAT-FINAL-PL
 deny   ip 172.20.0.0 0.0.255.255 172.20.0.0 0.0.255.255
 permit ip 172.20.0.0 0.0.255.255 any
!
ip access-list extended NAT-VPN-FIX
 deny   ip 172.20.0.0 0.0.255.255 172.20.0.0 0.0.255.255
 permit ip 172.20.0.0 0.0.255.255 any
!
! *** ACL CORRIGIDA PARA VOIP PERMITIR BOOT DO TELEFONE ***
ip access-list extended VOIP-NO-INTERNET
 permit udp 172.20.11.64 0.0.0.31 any eq bootps
 permit udp 172.20.11.64 0.0.0.31 any eq bootpc
 permit udp 172.20.11.64 0.0.0.31 any eq tftp
 permit tcp 172.20.11.64 0.0.0.31 172.20.0.0 0.0.255.255 eq 2000
 permit udp 172.20.11.64 0.0.0.31 172.20.0.0 0.0.255.255 range 16384 32767
 deny   ip any any
!
! --- LOGGING & SNMP ---
logging host 172.20.7.35
!
snmp-server community cisco RO ACL-SNMP
snmp-server traps snmp authentication linkdown linkup coldstart warmstart
snmp-server enable traps vrrp
snmp-server enable traps flowmon
snmp-server enable traps ds1
snmp-server enable traps call-home message-send-fail server-fail
snmp-server enable traps tty
snmp-server enable traps eigrp
snmp-server enable traps ospf state-change
snmp-server enable traps ospf errors
snmp-server enable traps ospf retransmit
snmp-server enable traps ospf lsa
snmp-server enable traps ospf cisco-specific state-change nssa-trans-change
snmp-server enable traps ospf cisco-specific state-change shamlink interface
snmp-server enable traps ospf cisco-specific state-change shamlink neighbor
snmp-server enable traps ospf cisco-specific errors
snmp-server enable traps ospf cisco-specific retransmit
snmp-server enable traps ospf cisco-specific lsa
snmp-server enable traps xgcp
snmp-server enable traps flash insertion removal
snmp-server enable traps c3g
snmp-server enable traps adslline
snmp-server enable traps ds3
snmp-server enable traps envmon
snmp-server enable traps icsudsu
snmp-server enable traps isdn call-information
snmp-server enable traps isdn layer2
snmp-server enable traps isdn chan-not-avail
snmp-server enable traps isdn ietf
snmp-server enable traps ds0-busyout
snmp-server enable traps ds1-loopback
snmp-server enable traps ethernet cfm cc mep-up mep-down cross-connect loop config
snmp-server enable traps ethernet cfm crosscheck mep-missing mep-unknown service-up
snmp-server enable traps vstack
snmp-server enable traps license
snmp-server enable traps disassociate
snmp-server enable traps deauthenticate
snmp-server enable traps authenticate-fail
snmp-server enable traps dot11-qos
snmp-server enable traps switch-over
snmp-server enable traps rogue-ap
snmp-server enable traps wlan-wep
snmp-server enable traps rf
snmp-server enable traps aaa_server
snmp-server enable traps atm subif
snmp-server enable traps bfd
snmp-server enable traps bgp
snmp-server enable traps bstun
snmp-server enable traps bulkstat collection transfer
snmp-server enable traps cef resource-failure peer-state-change peer-fib-state-change inconsistency
snmp-server enable traps memory bufferpeak
snmp-server enable traps cnpd
snmp-server enable traps config-copy
snmp-server enable traps config
snmp-server enable traps config-ctid
snmp-server enable traps dial
snmp-server enable traps dlsw
snmp-server enable traps dsp card-status
snmp-server enable traps dsp oper-state
snmp-server enable traps entity
snmp-server enable traps fru-ctrl
snmp-server enable traps resource-policy
snmp-server enable traps frame-relay multilink bundle-mismatch
snmp-server enable traps frame-relay
snmp-server enable traps frame-relay subif
snmp-server enable traps hsrp
snmp-server enable traps ipmobile
snmp-server enable traps ipmulticast
snmp-server enable traps isis
snmp-server enable traps mpls traffic-eng
snmp-server enable traps mpls fast-reroute protected
snmp-server enable traps mpls rfc ldp
snmp-server enable traps mpls ldp
snmp-server enable traps msdp
snmp-server enable traps mvpn
snmp-server enable traps pim neighbor-change rp-mapping-change invalid-pim-message
snmp-server enable traps pppoe
snmp-server enable traps cpu threshold
snmp-server enable traps nhrp nhs
snmp-server enable traps nhrp nhc
snmp-server enable traps nhrp nhp
snmp-server enable traps nhrp quota-exceeded
snmp-server enable traps rsvp
snmp-server enable traps ipsla
snmp-server enable traps stun
snmp-server enable traps syslog
snmp-server enable traps l2tun session
snmp-server enable traps l2tun pseudowire status
snmp-server enable traps vtp
snmp-server enable traps pw vc
snmp-server enable traps event-manager
snmp-server enable traps firewall serverstatus
snmp-server enable traps isakmp policy add
snmp-server enable traps isakmp policy delete
snmp-server enable traps isakmp tunnel start
snmp-server enable traps isakmp tunnel stop
snmp-server enable traps ipsec cryptomap add
snmp-server enable traps ipsec cryptomap delete
snmp-server enable traps ipsec cryptomap attach
snmp-server enable traps ipsec cryptomap detach
snmp-server enable traps ipsec tunnel start
snmp-server enable traps ipsec tunnel stop
snmp-server enable traps ipsec too-many-sas
snmp-server enable traps ccme
snmp-server enable traps srst
snmp-server enable traps mpls vpn
snmp-server enable traps voice
snmp-server enable traps dnis
snmp-server enable traps vrfmib vrf-up vrf-down vnet-trunk-up vnet-trunk-down
snmp-server host 172.20.7.35 version 2c cisco
!
control-plane
!
! --- TELEPHONY SERVICE & VOICE ---
mgcp profile default
!
dial-peer voice 2000 voip
 destination-pattern 2...
 session target ipv4:10.0.0.1
 codec g711ulaw
!
dial-peer voice 5000 voip
 destination-pattern 5...
 session target ipv4:10.0.0.10
 codec g711ulaw
!
telephony-service
 max-ephones 5
 max-dn 10
 ip source-address 172.20.11.65 port 2000
 system message PULA-VOICE
 load 7912 CP7912080004SCCP080108A.sbin
 max-conferences 8 gain -6
 transfer-system full-consult
 create cnf-files version-stamp 7960 Feb 11 2026 15:25:17
!
ephone-dn  1
 number 4001
!
ephone-dn  2
 number 4002
!
! --- BANNERS, LINES & SSH ---
!
banner motd %
######################################################################
#                                                                    #
#                       Private Property                             #
#           Unnauthorized access will not be tolerated               #
#                          RT1-Pl-777                                #
#                                                                    #
######################################################################
%
line con 0
 password 7 045807071C324F42080A16
 login local
line aux 0
line vty 0 4
 access-class SSH-ACCESS in
 exec-timeout 0 30
 login local
 transport input ssh
line vty 5 15
 access-class SSH-ACCESS in
 exec-timeout 0 30
 login local
 transport input ssh
!
scheduler allocate 20000 1000
ntp server 172.20.7.97
!
! --- GERAR CHAVE RSA (SSH) ---
ip ssh version 2
crypto key generate rsa modulus 2048
!

conf t 
logging trap informational

end
write memory